<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>åŠ¨æ€è§„åˆ’è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—</title>
</head>

<body>
    <script>
        var start, end, res;

        // é€’å½’
        function recurFib(n) {
            if (n<=2) {
                return 1;
            }
            var res=recurFib(n-1)+recurFib(n-2);
            return res;
        }

        start=Date.now();
        res=recurFib(40); // æ”¹ä¸º 50 å°±å¡æ­»äº†ğŸ˜‚
        end=Date.now();
        console.log('   é€’å½’ç»“æœï¼š', res, 'ç”¨æ—¶ï¼š', end-start);

        // åŠ¨æ€è§„åˆ’
        // 1. å½’çº³å­é—®é¢˜
        // 2. å®ç°éœ€è¦è¿­ä»£æ‰§è¡Œçš„éƒ¨åˆ†(å­é—®é¢˜)
        // 3. è®¡ç®—è¾¹ç•Œæ¡ä»¶
        function dynFib(n) {
            var arr=[0, 1, 1];
            if (n<=2) {
                return arr[n]
            }
            for (var i=3;i<=n;i++) {
                arr[i]=arr[i-1]+arr[i-2]
            }
            return arr[n];
        }

        start=Date.now();
        res=dynFib(1000000);
        end=Date.now();
        console.log('åŠ¨æ€è§„åˆ’ç»“æœï¼š', res, 'ç”¨æ—¶ï¼š', end-start); // 25ms

        // è¿­ä»£(åŠ¨æ€è§„åˆ’å‡çº§ç‰ˆ)
        function iterFib(n) {
            var last=1, nextLast=1, res=1;
            for (var i=3;i<=n;i++) {
                res=last+nextLast;
                last=nextLast;
                nextLast=res;
            }
            return res;
        }

        start=Date.now();
        res=iterFib(1000000);
        end=Date.now();
        console.log('è¿­ä»£ç»“æœï¼š', res, 'ç”¨æ—¶ï¼š', end-start); // 10ms

        function recurFib(n) {
            if (n<2) return 1;
            var stack=[1, 1];
            var num=3;
            while (num<=n) {
                var [one, two]=stack;
                stack.shift();
                stack.push(one+two);
                num++;
            }
            return stack[1];
        }

        start=Date.now();
        res=recurFib(1000000);
        end=Date.now();
        console.log('è¿­ä»£ç»“æœï¼š', res, 'ç”¨æ—¶ï¼š', end-start); // 20msï¼Œå¯èƒ½åšäº†æ ˆçš„æ“ä½œ

    </script>
</body>

</html>